/* 🎨 创意主题系统 - 保持紫色基调，通过形状、动效、装饰创造差异 */

/* 基础紫色变量 - 所有主题共享 */
:root {
    --base-purple: #8B5CF6;
    --base-purple-light: #A855F7;
    --base-purple-dark: #7C3AED;
    --base-background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
}

/* 主题1: 经典圆润风格 */
[data-theme="theme1"] {
    --theme-name: "经典圆润";
    --emoji: "💜";
    --card-radius: 25px;
    --element-radius: 15px;
}

[data-theme="theme1"] .memory-viewer {
    border-radius: var(--card-radius);
    transform: rotate(0deg);
    animation: gentleFloat 4s ease-in-out infinite alternate;
}

@keyframes gentleFloat {
    0% { transform: translateY(0px) rotate(0deg); }
    100% { transform: translateY(-8px) rotate(0.5deg); }
}

/* 主题2: 几何锐角风格 */
[data-theme="theme2"] {
    --theme-name: "几何锐角";
    --emoji: "🔷";
    --card-radius: 5px;
    --element-radius: 0px;
}

[data-theme="theme2"] .memory-viewer {
    border-radius: var(--card-radius);
    clip-path: polygon(0 10px, 10px 0, calc(100% - 10px) 0, 100% 10px, 100% calc(100% - 10px), calc(100% - 10px) 100%, 10px 100%, 0 calc(100% - 10px));
    animation: diamondPulse 3s ease-in-out infinite;
}

@keyframes diamondPulse {
    0%, 100% { transform: scale(1) rotate(0deg); }
    50% { transform: scale(1.02) rotate(0.2deg); }
}

/* 主题3: 六边形蜂巢风格 */
[data-theme="theme3"] {
    --theme-name: "蜂巢六边";
    --emoji: "🔯";
}

[data-theme="theme3"] .memory-viewer {
    border-radius: 20px;
    position: relative;
    animation: hexagonSpin 8s linear infinite;
}

[data-theme="theme3"] .memory-viewer::before {
    content: '';
    position: absolute;
    top: -5px;
    left: -5px;
    right: -5px;
    bottom: -5px;
    background: conic-gradient(from 0deg, var(--base-purple), var(--base-purple-light), var(--base-purple), var(--base-purple-light));
    border-radius: 25px;
    z-index: -1;
    animation: borderRotate 4s linear infinite reverse;
}

@keyframes hexagonSpin {
    0% { filter: hue-rotate(0deg); }
    100% { filter: hue-rotate(10deg); }
}

@keyframes borderRotate {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
}

/* 主题4: 波浪起伏风格 */
[data-theme="theme4"] {
    --theme-name: "波浪起伏";
    --emoji: "🌊";
}

[data-theme="theme4"] .memory-viewer {
    border-radius: 25px;
    position: relative;
    overflow: hidden;
    animation: waveFloat 6s ease-in-out infinite;
}

[data-theme="theme4"] .memory-viewer::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 200%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(139, 92, 246, 0.1), transparent);
    animation: waveSweep 3s ease-in-out infinite;
    z-index: -1;
}

@keyframes waveFloat {
    0%, 100% { transform: translateY(0px) scaleY(1); }
    50% { transform: translateY(-5px) scaleY(1.01); }
}

@keyframes waveSweep {
    0% { left: -100%; }
    100% { left: 100%; }
}

/* 主题5: 星光闪烁风格 */
[data-theme="theme5"] {
    --theme-name: "星光闪烁";
    --emoji: "✨";
}

[data-theme="theme5"] .memory-viewer {
    border-radius: 20px;
    position: relative;
    animation: starGlow 2s ease-in-out infinite alternate;
}

[data-theme="theme5"] .memory-viewer::after {
    content: '✨';
    position: absolute;
    top: 10px;
    right: 15px;
    font-size: 1.5rem;
    animation: sparkle 1.5s ease-in-out infinite;
    z-index: 10;
}

@keyframes starGlow {
    0% { box-shadow: 0 0 20px rgba(139, 92, 246, 0.3), inset 0 0 20px rgba(139, 92, 246, 0.1); }
    100% { box-shadow: 0 0 40px rgba(139, 92, 246, 0.6), inset 0 0 30px rgba(139, 92, 246, 0.2); }
}

@keyframes sparkle {
    0%, 100% { transform: scale(1) rotate(0deg); opacity: 0.8; }
    50% { transform: scale(1.3) rotate(180deg); opacity: 1; }
}

/* 主题6: 心跳律动风格 */
[data-theme="theme6"] {
    --theme-name: "心跳律动";
    --emoji: "💓";
}

[data-theme="theme6"] .memory-viewer {
    border-radius: 30px;
    animation: heartbeat 2s ease-in-out infinite;
    position: relative;
}

[data-theme="theme6"] .memory-title-view {
    animation: titlePulse 2s ease-in-out infinite;
}

@keyframes heartbeat {
    0%, 100% { transform: scale(1); }
    14% { transform: scale(1.02); }
    28% { transform: scale(1); }
    42% { transform: scale(1.02); }
    70% { transform: scale(1); }
}

@keyframes titlePulse {
    0%, 100% { color: var(--base-purple); }
    50% { color: var(--base-purple-light); text-shadow: 0 0 10px rgba(139, 92, 246, 0.5); }
}

/* 主题7: 旋转木马风格 */
[data-theme="theme7"] {
    --theme-name: "旋转木马";
    --emoji: "🎠";
}

[data-theme="theme7"] .memory-viewer {
    border-radius: 25px;
    transform-style: preserve-3d;
    animation: carouselSpin 10s linear infinite;
    position: relative;
}

[data-theme="theme7"] .memory-viewer::before {
    content: '💜 🌸 ✨';
    position: absolute;
    top: -30px;
    left: 50%;
    transform: translateX(-50%);
    font-size: 1.2rem;
    animation: carouselDecoSpin 10s linear infinite reverse;
}

@keyframes carouselSpin {
    0% { transform: perspective(1000px) rotateY(0deg); }
    100% { transform: perspective(1000px) rotateY(2deg); }
}

@keyframes carouselDecoSpin {
    0% { transform: translateX(-50%) rotate(0deg); }
    100% { transform: translateX(-50%) rotate(-360deg); }
}

/* 主题8: 梦幻气泡风格 */
[data-theme="theme8"] {
    --theme-name: "梦幻气泡";
    --emoji: "🫧";
}

[data-theme="theme8"] .memory-viewer {
    border-radius: 40px;
    position: relative;
    animation: bubbleFloat 5s ease-in-out infinite;
}

[data-theme="theme8"] .memory-viewer::before,
[data-theme="theme8"] .memory-viewer::after {
    content: '';
    position: absolute;
    border-radius: 50%;
    background: radial-gradient(circle, rgba(139, 92, 246, 0.3), transparent);
    animation: bubbleDance 4s ease-in-out infinite;
}

[data-theme="theme8"] .memory-viewer::before {
    width: 20px;
    height: 20px;
    top: 20px;
    left: 20px;
    animation-delay: 0s;
}

[data-theme="theme8"] .memory-viewer::after {
    width: 15px;
    height: 15px;
    bottom: 30px;
    right: 30px;
    animation-delay: 1s;
}

@keyframes bubbleFloat {
    0%, 100% { transform: translateY(0px) scale(1); }
    50% { transform: translateY(-10px) scale(1.01); }
}

@keyframes bubbleDance {
    0%, 100% { transform: translateY(0px) scale(1); opacity: 0.6; }
    33% { transform: translateY(-15px) scale(1.2); opacity: 0.8; }
    66% { transform: translateY(-5px) scale(0.9); opacity: 0.4; }
}

/* 统一紫色基调应用到所有组件 */
body {
    background: var(--base-background);
}

.memory-viewer {
    background: rgba(255, 255, 255, 0.95);
    border: 2px solid var(--base-purple);
    box-shadow: 0 20px 60px rgba(139, 92, 246, 0.3);
    backdrop-filter: blur(20px);
}

.memory-title-view {
    color: var(--base-purple);
}

.btn-action {
    transition: all 0.3s ease;
}

.btn-home {
    background: linear-gradient(135deg, var(--base-purple), var(--base-purple-light));
    color: white;
}

.btn-download {
    background: rgba(139, 92, 246, 0.1);
    color: var(--base-purple);
    border: 2px solid var(--base-purple);
}

.btn-action:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(139, 92, 246, 0.4);
}

.audio-note-section h3, 
.memory-description-section h3 {
    color: var(--base-purple);
}

.memory-description-text {
    border-left: 4px solid var(--base-purple);
    color: #4C1D95;
}

.audio-container {
    background: linear-gradient(135deg, var(--base-purple), var(--base-purple-light));
}

/* 🎭 不同主题的独特飘动装饰元素 */

/* 主题1: 经典圆润 - 温和的爱心飘动 */
[data-theme="theme1"] .floating-hearts .heart {
    animation: gentleHeartFloat 8s ease-in-out infinite;
}

@keyframes gentleHeartFloat {
    0%, 100% { transform: translateY(100vh) scale(1) rotate(0deg); opacity: 0; }
    10% { opacity: 0.8; }
    50% { transform: translateY(30vh) scale(1.1) rotate(10deg); opacity: 1; }
    90% { opacity: 0.8; }
}

/* 主题2: 几何锐角 - 锐角形状飘动 */
[data-theme="theme2"] .floating-hearts .heart::before {
    content: '🔷';
}

[data-theme="theme2"] .floating-hearts .heart {
    animation: geometricDance 6s linear infinite;
    font-size: 18px;
}

@keyframes geometricDance {
    0% { transform: translateY(100vh) rotate(0deg) scale(0.8); }
    25% { transform: translateY(75vh) rotate(90deg) scale(1.2); }
    50% { transform: translateY(50vh) rotate(180deg) scale(1); }
    75% { transform: translateY(25vh) rotate(270deg) scale(1.1); }
    100% { transform: translateY(-10vh) rotate(360deg) scale(0.9); }
}

/* 主题3: 蜂巢六边 - 六边形螺旋上升 */
[data-theme="theme3"] .floating-hearts .heart::before {
    content: '🔯';
}

[data-theme="theme3"] .floating-hearts .heart {
    animation: hexagonSpiral 10s ease-in-out infinite;
}

@keyframes hexagonSpiral {
    0% { transform: translateY(100vh) translateX(0px) rotate(0deg); opacity: 0; }
    20% { opacity: 1; }
    50% { transform: translateY(50vh) translateX(30px) rotate(180deg); }
    80% { opacity: 1; }
    100% { transform: translateY(-10vh) translateX(-30px) rotate(360deg); opacity: 0; }
}

/* 主题4: 波浪起伏 - 波浪式飘动 */
[data-theme="theme4"] .floating-hearts .heart::before {
    content: '🌊';
}

[data-theme="theme4"] .floating-hearts .heart {
    animation: waveMotion 7s ease-in-out infinite;
}

@keyframes waveMotion {
    0% { transform: translateY(100vh) translateX(0px) scale(1); }
    25% { transform: translateY(75vh) translateX(50px) scale(1.2); }
    50% { transform: translateY(50vh) translateX(-30px) scale(0.8); }
    75% { transform: translateY(25vh) translateX(40px) scale(1.1); }
    100% { transform: translateY(-10vh) translateX(0px) scale(1); }
}

/* 主题5: 星光闪烁 - 闪烁星星飘动 */
[data-theme="theme5"] .floating-hearts .heart::before {
    content: '✨';
}

[data-theme="theme5"] .floating-hearts .heart {
    animation: sparkleRise 9s ease-in-out infinite;
}

@keyframes sparkleRise {
    0%, 100% { transform: translateY(100vh) scale(0.5); opacity: 0; filter: brightness(1); }
    10% { opacity: 1; }
    20%, 40%, 60%, 80% { filter: brightness(2); transform: scale(1.3); }
    30%, 50%, 70%, 90% { filter: brightness(0.8); transform: scale(0.9); }
    95% { opacity: 1; }
}

/* 主题6: 心跳律动 - 心跳式飘动 */
[data-theme="theme6"] .floating-hearts .heart::before {
    content: '💓';
}

[data-theme="theme6"] .floating-hearts .heart {
    animation: heartbeatFloat 5s ease-in-out infinite;
}

@keyframes heartbeatFloat {
    0% { transform: translateY(100vh) scale(1); }
    10%, 30% { transform: translateY(80vh) scale(1.3); }
    20%, 40% { transform: translateY(75vh) scale(1); }
    50% { transform: translateY(50vh) scale(1.2); }
    60%, 80% { transform: translateY(30vh) scale(1.4); }
    70%, 90% { transform: translateY(25vh) scale(1.1); }
    100% { transform: translateY(-10vh) scale(1); }
}

/* 主题7: 旋转木马 - 旋转上升 */
[data-theme="theme7"] .floating-hearts .heart {
    animation: carouselRide 12s linear infinite;
}

[data-theme="theme7"] .floating-hearts .heart:nth-child(1)::before { content: '🎠'; }
[data-theme="theme7"] .floating-hearts .heart:nth-child(2)::before { content: '🎭'; }
[data-theme="theme7"] .floating-hearts .heart:nth-child(3)::before { content: '🎪'; }
[data-theme="theme7"] .floating-hearts .heart:nth-child(4)::before { content: '🎨'; }
[data-theme="theme7"] .floating-hearts .heart:nth-child(5)::before { content: '🎵'; }
[data-theme="theme7"] .floating-hearts .heart:nth-child(6)::before { content: '🌟'; }

@keyframes carouselRide {
    0% { transform: translateY(100vh) rotate(0deg) translateX(0px); }
    25% { transform: translateY(75vh) rotate(90deg) translateX(40px); }
    50% { transform: translateY(50vh) rotate(180deg) translateX(0px); }
    75% { transform: translateY(25vh) rotate(270deg) translateX(-40px); }
    100% { transform: translateY(-10vh) rotate(360deg) translateX(0px); }
}

/* 主题8: 梦幻气泡 - 气泡式飘动 */
[data-theme="theme8"] .floating-hearts .heart::before {
    content: '🫧';
}

[data-theme="theme8"] .floating-hearts .heart {
    animation: bubbleRise 11s ease-out infinite;
    filter: blur(0.5px);
}

@keyframes bubbleRise {
    0% { transform: translateY(100vh) scale(0.3) rotate(0deg); opacity: 0.3; }
    10% { opacity: 0.7; }
    20% { transform: translateY(85vh) scale(0.8) rotate(30deg); }
    40% { transform: translateY(70vh) scale(1.2) rotate(60deg); }
    60% { transform: translateY(50vh) scale(0.9) rotate(120deg); }
    80% { transform: translateY(20vh) scale(1.1) rotate(200deg); }
    90% { opacity: 0.8; }
    100% { transform: translateY(-10vh) scale(0.5) rotate(360deg); opacity: 0; }
}

/* 🌟 每个主题独特的星空背景效果 */
[data-theme="theme1"] .stars { animation: gentleTwinkle 4s ease-in-out infinite alternate; }
[data-theme="theme2"] .stars { animation: geometricTwinkle 2s linear infinite; }
[data-theme="theme3"] .stars { animation: hexagonTwinkle 6s ease-in-out infinite; }
[data-theme="theme4"] .stars { animation: waveTwinkle 5s ease-in-out infinite; }
[data-theme="theme5"] .stars { animation: sparklingTwinkle 1.5s ease-in-out infinite; }
[data-theme="theme6"] .stars { animation: heartbeatTwinkle 2s ease-in-out infinite; }
[data-theme="theme7"] .stars { animation: carouselTwinkle 8s linear infinite; }
[data-theme="theme8"] .stars { animation: bubbleTwinkle 7s ease-in-out infinite; }

@keyframes gentleTwinkle {
    0% { opacity: 0.3; }
    100% { opacity: 0.8; }
}

@keyframes geometricTwinkle {
    0%, 50%, 100% { opacity: 0.2; }
    25%, 75% { opacity: 0.9; }
}

@keyframes hexagonTwinkle {
    0%, 100% { opacity: 0.3; transform: scale(1); }
    50% { opacity: 0.9; transform: scale(1.1); }
}

@keyframes waveTwinkle {
    0%, 100% { opacity: 0.3; filter: blur(0px); }
    50% { opacity: 0.7; filter: blur(0.5px); }
}

@keyframes sparklingTwinkle {
    0%, 100% { opacity: 0.2; filter: brightness(1); }
    50% { opacity: 1; filter: brightness(2); }
}

@keyframes heartbeatTwinkle {
    0%, 100% { opacity: 0.3; }
    14%, 42% { opacity: 0.8; }
    28% { opacity: 0.5; }
}

@keyframes carouselTwinkle {
    0% { opacity: 0.2; transform: rotate(0deg); }
    100% { opacity: 0.6; transform: rotate(360deg); }
}

@keyframes bubbleTwinkle {
    0%, 100% { opacity: 0.2; filter: blur(0px); }
    33% { opacity: 0.6; filter: blur(1px); }
    66% { opacity: 0.4; filter: blur(0.5px); }
}

/* 🎨 主题切换动画 */
.theme-transition {
    transition: all 0.8s cubic-bezier(0.4, 0, 0.2, 1);
}

/* 📍 主题标识 */
.theme-indicator {
    position: fixed;
    top: 20px;
    left: 20px;
    background: rgba(255, 255, 255, 0.95);
    border: 2px solid var(--base-purple);
    border-radius: 15px;
    padding: 10px 15px;
    font-size: 0.9rem;
    font-weight: 600;
    color: var(--base-purple);
    box-shadow: 0 4px 15px rgba(139, 92, 246, 0.3);
    backdrop-filter: blur(10px);
    z-index: 1000;
    animation: fadeInLeft 1s ease-out;
}

@keyframes fadeInLeft {
    from {
        opacity: 0;
        transform: translateX(-20px);
    }
    to {
        opacity: 1;
        transform: translateX(0);
    }
}

/* 📱 响应式设计 */
@media (max-width: 768px) {
    .theme-indicator {
        top: 10px;
        left: 10px;
        padding: 8px 12px;
        font-size: 0.8rem;
    }
    
    /* 移动端动画性能优化 */
    [data-theme="theme3"] .memory-viewer::before,
    [data-theme="theme7"] .memory-viewer::before {
        animation-duration: 6s; /* 减慢动画速度 */
    }
    
    /* 简化移动端的复杂动画 */
    [data-theme="theme5"] .memory-viewer::after,
    [data-theme="theme8"] .memory-viewer::before,
    [data-theme="theme8"] .memory-viewer::after {
        display: none; /* 在移动端隐藏复杂装饰 */
    }
}

@media (max-width: 480px) {
    /* 进一步优化小屏设备 */
    .floating-hearts .heart {
        font-size: 16px; /* 减小飘动元素大小 */
    }
    
    /* 简化动画，提升性能 */
    [data-theme="theme2"] .floating-hearts .heart,
    [data-theme="theme3"] .floating-hearts .heart,
    [data-theme="theme7"] .floating-hearts .heart {
        animation-duration: 8s; /* 统一减慢速度 */
    }
}

/* 🎯 轮播图主题适配 */
.swiper-button-prev,
.swiper-button-next {
    background: rgba(139, 92, 246, 0.8);
}

.swiper-pagination-bullet.active {
    background: var(--base-purple);
}

/* 🌟 高对比度和无障碍设计 */
@media (prefers-reduced-motion: reduce) {
    /* 为偏好减少动画的用户提供静态体验 */
    .memory-viewer,
    .floating-hearts .heart,
    .stars,
    .theme-indicator {
        animation: none !important;
        transition-duration: 0.1s !important;
    }
    
    /* 保持基本的hover效果 */
    .memory-viewer:hover {
        transform: translateY(-2px) !important;
    }
}

@media (prefers-color-scheme: dark) {
    /* 深色模式适配 */
    .memory-viewer {
        background: rgba(30, 30, 50, 0.95);
        color: #F9FAFB;
    }
    
    .theme-indicator {
        background: rgba(30, 30, 50, 0.95);
        color: var(--base-purple-light);
        border-color: var(--base-purple-light);
    }
}
